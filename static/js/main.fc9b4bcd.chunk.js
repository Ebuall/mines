(this.webpackJsonpmines=this.webpackJsonpmines||[]).push([[0],{15:function(e,t,n){e.exports={wrapper:"SelectList_wrapper__1r9zo",selected:"SelectList_selected__1v-N9"}},18:function(e,t,n){e.exports={wrappper:"Scoreboard_wrappper__SVYlH"}},19:function(e,t,n){},21:function(e,t,n){e.exports=n(36)},26:function(e,t,n){},27:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n.n(i),c=(n(26),n(27),n(1)),u=n(20),l=n(6),s=n.n(l),m=n(10),d=n(8),f=n(4),g=n(5),p=n(2),v=p.b(p.e,(function(e){return e>0&&e<=50}),"Dimension"),h=p.b(p.e,(function(e){return e>0&&e<2500}),"MineCount"),b=p.d({height:v,width:v,mines:h},"Setting"),_=p.b(p.f,(function(e){var t=Number(e);return!isNaN(t)&&t>=0}),"InputNumber"),y=p.d({height:_,width:_,mines:_}),E=new p.a("ValidatedSetting",(function(e){return b.is(e)&&w(e)}),(function(e,t){return Object(g.pipe)(y.validate(e,t),Object(f.chain)((function(e){var n=Number(e.height),a=Number(e.width),r=Number(e.mines);return b.validate({height:n,width:a,mines:r},t)})),Object(f.chain)((function(n){return w(n)?p.g(n):p.c(e,t)})))}),(function(e){var t=e.height,n=e.width,a=e.mines;return{height:t.toString(),width:n.toString(),mines:a.toString()}}));function w(e){return e.width*e.height>e.mines}var O,x,j=[{height:8,width:8,mines:10},{height:16,width:16,mines:40},{height:16,width:30,mines:99}],S={mode:"menu",settings:E.encode(j[0]),setting:0},N=Object(d.b)({name:"game",initialState:S,reducers:{start:function(e){var t;t=e.settings,Object(f.isRight)(E.decode(t))&&(e.mode="game")},exit:function(e){console.log("exit triggers here"),e.mode="menu"},selectDifficulty:function(e,t){var n=j[t.payload];n&&(e.settings=E.encode(n)),e.setting=t.payload},updateSettings:function(e,t){e.settings=t.payload,e.setting=3}}});function C(e,t){return{x:e,y:t}}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.Closed;return{value:e,state:t}}function M(e){return Array.from(new Array(e),(function(e,t){return t}))}!function(e){e[e.Closed=0]="Closed",e[e.Open=1]="Open",e[e.Flagged=2]="Flagged"}(O||(O={})),k.isMine=function(e){return e.value<0},k.forEachNeighbor=function(e,t,n){var a=t.x,r=t.y,i=e[0].length,o=e.length;r<o-1&&(n(e[r+1][a],{x:a,y:r+1}),a<i-1&&n(e[r+1][a+1],{x:a+1,y:r+1})),a<i-1&&(n(e[r][a+1],{x:a+1,y:r}),r>0&&n(e[r-1][a+1],{x:a+1,y:r-1})),r>0&&(n(e[r-1][a],{x:a,y:r-1}),a>0&&n(e[r-1][a-1],{x:a-1,y:r-1})),a>0&&(n(e[r][a-1],{x:a-1,y:r}),r<o-1&&n(e[r+1][a-1],{x:a-1,y:r+1}))},function(e){e[e.Init=0]="Init",e[e.Progress=1]="Progress",e[e.Over=2]="Over",e[e.Win=3]="Win"}(x||(x={}));var B=Object(d.b)({name:"board",initialState:{map:void 0,gameState:x.Init},reducers:{init:function(e,t){Object(g.pipe)(E.decode(t.payload),Object(f.map)((function(t){e.map=function(e){var t=e.height,n=e.width;return M(t).map((function(e){return M(n).map((function(e){return k()}))}))}(t)})))},click:function(e,t){var n=t.payload,a=n.settings,r=n.click;if(console.log("clicked",r),e.gameState!==x.Over){if(e.gameState===x.Init)Object(g.pipe)(E.decode(a),Object(f.map)((function(t){e.map=function(e,t){for(var n=e.height,a=e.width,r=e.mines,i=Array.from(new Array(n*a-1),(function(e){return k()})),o=0;o<r;o++)i[o].value=-10;!function(e){for(var t=e.length-1;t>0;t--){var n=(r=0,i=t+1,r=Math.ceil(r),i=Math.floor(i),Math.floor(Math.random()*(i-r))+r),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}var r,i}(i),i.splice(t.y*a+t.x,0,k(0,O.Open));for(var c=new Array(n),u=0;u<c.length;u++){var l=u*a;c[u]=i.slice(l,l+a)}for(var s=0;s<a;s++)for(var m=0;m<n;m++)k.isMine(c[m][s])&&k.forEachNeighbor(c,C(s,m),(function(e){return e.value++}));return c}(t,r),e.gameState=x.Progress})));else{var i=e.map[r.y][r.x];i.state=O.Open,k.isMine(i)&&(e.gameState=x.Over)}!function e(t,n){0===t[n.y][n.x].value&&k.forEachNeighbor(t,n,(function(n,a){n.state!==O.Open&&n.value>=0&&(n.state=O.Open,console.log("opening around",a),e(t,a))}))}(e.map,r),0===e.map.reduce((function(e,t){return e+t.reduce((function(e,t){return e+(k.isMine(t)||t.state!==O.Closed?0:1)}),0)}),0)&&(e.gameState=x.Win)}},flag:function(e,t){var n=t.payload,a=n.x,r=n.y;e.gameState===x.Progress&&(e.map[r][a].state=O.Flagged)},unflag:function(e,t){var n=t.payload,a=n.x,r=n.y;e.gameState===x.Progress&&(e.map[r][a].state=O.Closed)}},extraReducers:Object(m.a)({},N.actions.exit().type,(function(e){console.log("exit triggers here too"),e.map=void 0,e.gameState=x.Init}))}),A=n(18),P=n.n(A),W=function(){var e=Object(c.c)((function(e){return{board:e.board,mineCount:e.game.settings.mines}}));if(e.board.gameState===x.Over)return r.a.createElement("div",null,"Game Over \ud83d\ude41");if(e.board.gameState===x.Win)return r.a.createElement("div",null,"You Won \ud83c\udf89");var t=e.board.map.reduce((function(e,t){return e+t.reduce((function(e,t){return e+(t.state===O.Flagged?1:0)}),0)}),0);return r.a.createElement("div",{className:P.a.wrappper},"\ud83d\udea9 ",Number(e.mineCount)-t)};function F(e){return Array.from(new Array(e),(function(e,t){return t}))}var I=function(e){return r.a.createElement("div",{draggable:!1,className:s.a.square+" "+s.a["m"+e.value]+" "+s.a.open},e.children)},D=function(){return r.a.createElement(I,null,"\ud83d\udca3")},G=function(e){var t=Object(c.b)();return r.a.createElement("div",{className:s.a.square,onContextMenu:function(n){n.preventDefault(),t(B.actions.unflag(e))}},"\ud83d\udea9")},H=function(e){var t=e.settings,n=(e.children,Object(u.a)(e,["settings","children"])),a=Object(c.b)();return r.a.createElement("div",{key:n.x,className:s.a.square,onClick:function(){return a(B.actions.click({settings:t,click:n}))},onContextMenu:function(e){e.preventDefault(),a(B.actions.flag(n))}})},q=function(e){var t=e.settings,n=Object(c.b)();Object(a.useEffect)((function(){n(B.actions.init(t))}),[t,n]);var i=Object(c.c)((function(e){return e.board}));return i.map?r.a.createElement("div",{className:s.a.wrapper,style:{}},r.a.createElement(W,null),F(+t.height).map((function(e){return r.a.createElement("div",{key:e,className:s.a.row},F(+t.width).map((function(n){var a=i.map[e][n];return!k.isMine(a)||a.state!==O.Open&&i.gameState!==x.Over&&i.gameState!==x.Win?a.state===O.Closed?r.a.createElement(H,{key:n,settings:t,x:n,y:e}):a.state===O.Flagged?r.a.createElement(G,{key:n,x:n,y:e}):r.a.createElement(I,{key:n,value:a.value},a.value||""):r.a.createElement(D,{key:n})})))})),r.a.createElement("button",{onClick:function(){return n(N.actions.exit())}},"Exit")):r.a.createElement("div",null)},J=n(11),R=n(19),L=n.n(R),K=function(e){var t=e.settings,n=e.disabled,a=void 0!==n&&n,i=e.onChange;return r.a.createElement("div",{className:L.a.wrapper},r.a.createElement("label",null,r.a.createElement("div",null,"Height"),r.a.createElement("input",{type:"text",value:t.height,disabled:a,pattern:"[0-9]{1,2}",onChange:function(e){return Object(g.pipe)(_.decode(e.target.value),Object(f.map)((function(e){return i(Object(J.a)({},t,{height:e}))})))}})),r.a.createElement("label",null,r.a.createElement("div",null,"Width"),r.a.createElement("input",{type:"text",value:t.width,disabled:a,pattern:"[0-9]{1,2}",onChange:function(e){return Object(g.pipe)(_.decode(e.target.value),Object(f.map)((function(e){return i(Object(J.a)({},t,{width:e}))})))}})),r.a.createElement("label",null,r.a.createElement("div",null,"Mine Count"),r.a.createElement("input",{type:"text",value:t.mines,disabled:a,pattern:"[0-9]{1,3}",onChange:function(e){return Object(g.pipe)(_.decode(e.target.value),Object(f.map)((function(e){return i(Object(J.a)({},t,{mines:e}))})))}})))},V=n(7),X=n.n(V),Y=n(15),z=n.n(Y),Q=function(e){return r.a.createElement("div",{className:z.a.wrapper},e.entries.map((function(t){return r.a.createElement("div",{key:t.title,className:t.value===e.selected?z.a.selected:void 0,onClick:function(){return e.onChange(t.value)}},t.title)})))},U=[{title:"Easy",value:0},{title:"Medium",value:1},{title:"Hard",value:2},{title:"Custom",value:3}],$=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.game}));return r.a.createElement("div",{className:X.a.wrapper,onContextMenu:function(e){return e.preventDefault()}},"game"===t.mode&&r.a.createElement(q,{settings:t.settings}),"menu"===t.mode&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:X.a.menu},r.a.createElement("div",{className:X.a.flex},r.a.createElement("div",{className:X.a.padded},r.a.createElement(Q,{entries:U,selected:t.setting,onChange:function(t){return e(N.actions.selectDifficulty(t))}})),r.a.createElement("div",{className:X.a.padded},r.a.createElement(K,{settings:t.settings,onChange:function(t){return e(N.actions.updateSettings(t))}}))),r.a.createElement("button",{className:X.a.start,onClick:function(){return e(N.actions.start())}},"Start"))))};var T=function(){return r.a.createElement($,null)},Z=Object(d.a)({reducer:{game:N.reducer,board:B.reducer}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:Z},r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,n){e.exports={wrapper:"Board_wrapper__1KPR3",row:"Board_row__31yPi",square:"Board_square__yalsw",open:"Board_open__33LFk",m1:"Board_m1__33jAX",m2:"Board_m2__3ay1u",m3:"Board_m3__2QFR1",m4:"Board_m4__MPHu4",m5:"Board_m5__kjbyA",m6:"Board_m6__3UP3J",m7:"Board_m7__3kXsK",m8:"Board_m8__3Hh2c"}},7:function(e,t,n){e.exports={wrapper:"Game_wrapper__3oH14",padded:"Game_padded__3SoC3",menu:"Game_menu__3_saJ",flex:"Game_flex__1l6-r",start:"Game_start__1APg2"}}},[[21,1,2]]]);
//# sourceMappingURL=main.fc9b4bcd.chunk.js.map